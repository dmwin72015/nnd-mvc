<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>静态页面</title>
    <link rel="stylesheet/less" type="text/css" href="talk.less" />
    <script>
    less = {
        env: "development",
        async: false,
        fileAsync: false,
        poll: 1000,
        functions: {},
        dumpLineNumbers: "comments",
        relativeUrls: false,
        rootpath: ":/a.com/"
    };
    </script>
    <script src="http://cdn.bootcss.com/less.js/1.7.0/less.min.js"></script>
</head>

<body>
    <div class="dm-chat-wrapper dm-popup-box dm-anim" id="chatBox">
        <section class="dm-wrapper-title"></section>
        <section class="dm-wrapper-content">
            <ul class="dm-chat-userlist dm-user-list hide">
                <li>aaaaa</li>
                <li>aaaaa</li>
                <li>aaaaa</li>
                <li>aaaaa</li>
                <li>aaaaa</li>
                <li>aaaaa</li>
            </ul>
            <div class="dm-chat-box">
                <div class="dm-chat-inner">
                    <div class="dm-chat-title">
                        <div class="dm-chat-info">
                            <img src="//tva1.sinaimg.cn/crop.0.0.118.118.180/5db11ff4gw1e77d3nqrv8j203b03cweg.jpg" alt="" class="dm-avatar">
                            <a class="dm-chat-name no-break" title="主机主机主机主机主机主机主机主机主机主机主机主机主机主机主机">红衣主教
                                <br/>
                                <span class="dm-chat-userStatus online">(在线)</span>
                            </a>
                        </div>
                        <div class="dm-wrapper-tool">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div class="dm-chat-main">
                        <ul>
                            <li>
                                <div class="chat-user">
                                    <img src="//tva1.sinaimg.cn/crop.0.0.118.118.180/5db11ff4gw1e77d3nqrv8j203b03cweg.jpg" class="dm-avatar" alt="">
                                    <span class="user-name no-break">
                                    zhang张阿森纳
                                    <i class="time">2017-10-12 12:23:31</i>
                                </span>
                                </div>
                                <div class="chat-text">
                                    z上单阿斯顿四z上单阿斯顿阿斯顿阿斯顿阿三阿四
                                </div>
                            </li>
                            <li class="mine">
                                <div class="chat-user">
                                    <img src="//tva1.sinaimg.cn/crop.0.0.118.118.180/5db11ff4gw1e77d3nqrv8j203b03cweg.jpg" class="dm-avatar" alt="">
                                    <span class="user-name no-break">
                                     <i class="time">2017-10-12 12:23:31</i>
                                    zhang张阿森纳
                                </span>
                                </div>
                                <div class="chat-text">
                                    z上单阿斯顿阿斯顿阿斯顿斯顿阿斯<br/>顿阿斯顿阿三阿四
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="dm-chat-foot">
                        <div class="dm-chat-tool">
                            <span class="dm-icon emoji-icon">
                                
                            </span>
                            <span class="dm-icon file-icon">
                                
                            </span>
                            <span class="dm-icon audio-icon">
                                
                            </span>
                            <span class="dm-icon video-icon">
                                
                            </span>
                            <span class="dm-icon setting-icon">
                                
                            </span>
                            <span class="dm-icon history-icon pull-right">
                                <em>聊天记录</em>
                            </span>
                        </div>

                        <div class="dm-chat-sendText">
                            <textarea id="sendText" autofocus="true"></textarea>
                        </div>
                        <div class="dm-chat-sendBtns">
                            <a href="javascript:;" class="dm-btn danger">关闭</a>

                            <a href="javascript:;" class="dm-btn-group">
                                <span class="dm-btn send">发送</span>
                                <span class="dm-btn send dropdown" id="sendOpt"><i class="caret"></i></span>
                                <ul class="dropdown-menu" data-toggle="sendOpt">
                                    <li>
                                        <i>√</i>i按Enter键发送消息
                                    </li>
                                    <li>
                                        <i></i>按Ctrl+Enter键发送消息
                                    </li>
                                </ul>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</body>
<script src="http://localhost:9700/socket.io/socket.io.js"></script>
<script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script type="html/tmpl" id="others">
<li>
    <div class="chat-user">
        <img src="//tva1.sinaimg.cn/crop.0.0.118.118.180/5db11ff4gw1e77d3nqrv8j203b03cweg.jpg" class="dm-avatar" alt="">
        <span class="user-name no-break"><%name%><i class="time"><%time%></i></span>
    </div>
    <div class="chat-text">
        <%words%>
    </div>
</li>
</script>
<script type="html/tmpl" id="mine">
<li class="mine">
    <div class="chat-user">
        <img src="//tva1.sinaimg.cn/crop.0.0.118.118.180/5db11ff4gw1e77d3nqrv8j203b03cweg.jpg" class="dm-avatar" alt="">
        <span class="user-name no-break"><i class="time"><%time%></i><%name%></span>
    </div>
    <div class="chat-text"><%words%></div>
</li>
</script>
<script src="talk.js"></script>
<script type="text/javascript">
var transitionEvent = (function() {
    var t,
        el = document.createElement("div");
    var transitions = {
        "transition": "transitionend",
        "OTransition": "oTransitionEnd",
        "MozTransition": "transitionend",
        "WebkitTransition": "webkitTransitionEnd"
    }

    for (t in transitions) {
        if (el.style[t] !== undefined) {
            return transitions[t];
        }
    }
}());

var animationEvent = (function() {
    var t,
        el = document.createElement("div");

    var animations = {
        "animation": "animationend",
        "OAnimation": "oAnimationEnd",
        "MozAnimation": "animationend",
        "WebkitAnimation": "webkitAnimationEnd"
    }

    for (t in animations) {
        if (el.style[t] !== undefined) {
            return animations[t];
        }
    }
}());
var oDiv = document.getElementById('chatBox');

oDiv.classList.add('dm-bounceIn');

oDiv.addEventListener(animationEvent, function() {
    oDiv.classList.remove('dm-bounceIn');
    console.log('aaaaa')
});

$('.dropdown').click(function(){
    var id = this.id;
    $('[data-toggle="'+ id +'"]').show().addClass('dm-anim dm-bottomIn');
})


$(window).on('resize',function(){
    var W = window.innerWidth;
    var w = $chatbox.width();

    $chatbox.css({
        left: (W - w)/2
    });
}).resize();





</script>

</html>